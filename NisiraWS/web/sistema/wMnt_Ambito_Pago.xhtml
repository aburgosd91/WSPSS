<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="templatebanco.xhtml"
                xmlns:pm="http://primefaces.org/mobile"
                xmlns:cmp="http://java.sun.com/jsf/composite/cmp">
    >
    <ui:define name="metadata">        
    </ui:define>
    <ui:define name="body">
        <h:form id="datos" >
            #{ambitoPagoAction.findDetalle()}
            <cmp:barra_mnt bean="#{ambitoPagoAction}"/>
            <p:panelGrid id="cabecera" columns="2" columnClasses="no-border,no-border,no-border">
                <f:facet name="header">
                    #{ambitoPagoAction.tituloHead}
                </f:facet>
                <p:outputLabel value="Código: " />
                <p:inputText id="idruta" size="3"
                             disabled="true" value="#{ambitoPagoAction.datoEdicion.codigo}"/>

                <p:outputLabel for="descripcion"  value="Descripcion:" />
                <p:inputTextarea id="descripcion" cols="60" rows="2" 
                                 disabled="#{!ambitoPagoAction.edicion}"
                                 value="#{ambitoPagoAction.datoEdicion.descripcion}" 
                                 onkeyup="javascript:this.value = this.value.toUpperCase();"
                                 >
                    <p:ajax event="valueChange" immediate="true" process="@this"/>
                </p:inputTextarea>
                <p:outputLabel for="nom" value="Nombre Corto"/>
                <p:inputText id="nom" value="#{ambitoPagoAction.datoEdicion.nombre_corto}" disabled="#{!ambitoPagoAction.edicion}"/>
                <p:outputLabel for="costohora" value="Costo por Hora: " />
                <p:inputText id="costohora" disabled="#{!ambitoPagoAction.edicion}" value="#{ambitoPagoAction.datoEdicion.costo_por_hora}"/>
                <p:outputLabel for="costoadd" value="Costo Adicional: " />
                <p:inputText id="costoadd" disabled="#{!ambitoPagoAction.edicion}" value="#{ambitoPagoAction.datoEdicion.costo_adicional}"/>
            </p:panelGrid>
            <p:dataTable id="lstAmbPagoRuta" 
                         value="#{ambitoPagoAction.lstambpagRuta}" 
                         selectionMode="single"
                         selection="#{ambitoPagoAction.slcAmbPagRuta}"
                         var="pagRuta" 
                         paginator="true" paginatorPosition="top"
                         paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                         widgetVar="lstAmbPagoRuta"
                         rowKey="#{pagRuta.item}">
                <f:facet name="{Comandos}">
                    <p:commandButton id="btnDgen" value="Nuevo" ajax="true" image="ui-icon-nuevo"  onclick="PF('rutasdialog').show()" disabled="#{!ambitoPagoAction.edicion}"/>
                    <p:commandButton id="btDdel" value="Eliminar" ajax="true" image="ui-icon-eliminar"  actionListener="#{ambitoPagoAction.dellAmbitoPagoRuta()}"  disabled="#{!ambitoPagoAction.edicion}"/>
                </f:facet>
                <p:column style="width:15%;" filterBy="#{pagRuta.item}" filterMatchMode="contains" sortBy="#{pagRuta.item}">
                    <f:facet name="header">
                        <h:outputText value="Item" />
                    </f:facet>
                    <h:outputText value="#{pagRuta.item}"/>
                </p:column>
                <p:column style="width:15%;" filterBy="#{pagRuta.descripcion}" filterMatchMode="contains" sortBy="#{pagRuta.descripcion}">
                    <f:facet name="header">
                        <h:outputText value="Descripcion" />
                    </f:facet>
                    <h:outputText value="#{pagRuta.descripcion}"/>
                </p:column>
            </p:dataTable>            
            <cmp:mDialogElimina_lst id="cmpDialog" bean="#{ambitoPagoAction}" ventana="MNT" />
            <p:dialog id="rutasdialog" widgetVar="rutasdialog" style="width: 300px; height: 300px" modal="true" closable="true">
                <p:dataTable id="tbl" var="listRuta" value="#{ambitoPagoAction.lstRutas}"  widgetVar="listRuta" 
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" paginatorPosition="top"
                             paginator="true" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{ambitoPagoAction.slcRutas}" rowKey="#{listRuta.idruta}" resizableColumns="true">
                    <p:ajax event="rowDblselect" listener="#{ambitoPagoAction.addAmbitoPagoRuta()}" />
                    <p:column style="width:15%;" filterBy="#{listRuta.idruta}" filterMatchMode="contains" sortBy="#{listRuta.idruta}">
                        <f:facet name="header">
                            <h:outputText value="Código" />
                        </f:facet>
                        <h:outputText value="#{listRuta.idruta}"/>
                    </p:column>
                    <p:column style="width:45%;" filterBy="#{listRuta.descripcion}" filterMatchMode="contains" sortBy="#{listRuta.descripcion}">
                        <f:facet name="header">
                            <h:outputText value="Descripción" />
                        </f:facet>
                        <h:outputText value="#{listRuta.descripcion}"/>
                    </p:column>
                    <p:column style="width:15%;" filterBy="#{listRuta.estado}">
                        <f:facet name="header">
                            <h:outputText value="ESTADO"/>
                        </f:facet>
                        <f:facet name="filter">
                            <p:selectOneButton onchange="PF('listRuta').filter()">
                                <f:selectItem  itemLabel="Activo" itemValue="#{1}"/>
                                <f:selectItem itemLabel="Inactivo" itemValue="#{0}"/>
                            </p:selectOneButton>
                        </f:facet>
                        <h:graphicImage value="../images/img/#{listRuta.estado==1?'activo':'inactivo'}.png"/>
                        <h:outputText value="#{listRuta.estado==1?'Activo':'Inactivo'}" />
                    </p:column>
                </p:dataTable>
            </p:dialog>
            <p:growl id="growl" life="4000" showDetail="false"  />
        </h:form>
    </ui:define>
</ui:composition>

