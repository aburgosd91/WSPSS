<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="templatebanco.xhtml"
                xmlns:pm="http://primefaces.org/mobile"
                xmlns:cmp="http://java.sun.com/jsf/composite/cmp">
    <ui:define name="metadata">
    </ui:define>
    <ui:define name="body">
        <h:form id="datos">
            #{ordenservicioclienteAction.findetalle()}
            <cmp:barra_mnt bean="#{ordenservicioclienteAction}"/>
            <p:panelGrid columns="1" style="width:100%; text-align: left" id="pnl_reprogramar" columnClasses="no-border">
                <f:facet name="header">
                    <p:outputLabel value="#{ordenservicioclienteAction.tituloHead}"/>
                </f:facet>
                <div class="ui-grid ">
                    <div class="ui-grid-row">
                        <p:fieldset legend="Datos" style="width: 100%" >
                            <div class="ui-grid-col-6">
                                <p:panelGrid  columns="2" columnClasses="no-border, no-border" style="width: 100%">
                                    <p:outputLabel value="Documentos"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border,no-border" style="margin-left: -10px;">
                                        <p:selectOneMenu id="cboiddoc" value="#{ordenservicioclienteAction.datoEdicion.iddocumento}" style="width:200px" disabled="#{!ordenservicioclienteAction.edicion}">
                                            <p:ajax listener="#{ordenservicioclienteAction.oncDocChange}" update="cboserie num" />
                                            <f:selectItems value="#{ordenservicioclienteAction.listDocumentos}" var="iddocs" itemLabel="#{iddocs.descripcion}" itemValue="#{iddocs.iddocumento}"/>
                                        </p:selectOneMenu>
                                        <p:selectOneMenu id="cboserie" value="#{ordenservicioclienteAction.datoEdicion.serie}" style="width:70px" disabled="#{!ordenservicioclienteAction.edicion}">
                                            <f:selectItems value="#{ordenservicioclienteAction.listNumemisor}" var="nume" itemLabel="#{nume.serie}" itemValue="#{nume.serie}"/>
                                        </p:selectOneMenu>
                                        <p:inputText id="num" style="width: 90px !important" value="#{ordenservicioclienteAction.datoEdicion.numero}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                    </p:panelGrid>
                                    <p:outputLabel for="nromanual"  value="Nro Manual:" />
                                    <p:inputText id="nromanual" style="width: 200px !important;" value="#{ordenservicioclienteAction.datoEdicion.nromanual}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                    <p:outputLabel for="nrocontenedor"  value="Nro Contenedor:" />
                                    <p:inputText id="nrocontenedor" style="width: 200px !important;" value="#{ordenservicioclienteAction.datoEdicion.nrocontenedor}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                    <p:outputLabel for="nroprecinto"  value="Nro Precinto:" />
                                    <p:inputText id="nroprecinto" style="width: 200px !important;" value="#{ordenservicioclienteAction.datoEdicion.nroprecinto}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                    <p:outputLabel for="nro_oservicio"  value="Nro Servicio:" />
                                    <p:inputText id="nro_oservicio" style="width: 200px !important;" value="#{ordenservicioclienteAction.datoEdicion.nro_oservicio}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                </p:panelGrid>
                            </div>
                            <div class="ui-grid-col-6">
                                <p:panelGrid  columns="2" columnClasses="no-border, no-border" >
                                    <p:outputLabel value="Fecha" escape="false"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border, no-border" >
                                        <p:calendar id="button1" value="#{ordenservicioclienteAction.datoEdicion.fecha}" showOn="button" pattern="dd/MM/yyyy" mask="true" disabled="#{!ordenservicioclienteAction.edicion}">
                                            <!--<p:ajax event="dateSelect" listener="{planventaAction.updateCampañas}" update="lstCampaña"/>-->
                                        </p:calendar>
                                        <p:outputLabel for="estado"  value="Estado:" />
                                        <p:selectOneMenu id="estado" value="#{ordenservicioclienteAction.datoEdicion.idestado}"  disabled="#{!ordenservicioclienteAction.edicion}" >    
                                            <f:selectItems value="#{ordenservicioclienteAction.listEstado}" var="tipoEstado" itemLabel="#{tipoEstado.descripcion}" itemValue="#{tipoEstado.idestado}" />
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                    
                                    <p:outputLabel value="Cliente:" escape="false" />
                                    <h:panelGrid id="cntClie" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.verCntClieprov}" 
                                                         disabled="true"  icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{ordenservicioclienteAction.valorClieprov}" update="cntClie"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{ordenservicioclienteAction.datoEdicion.idclieprov}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                        <p:inputText size="50" readonly="true" value="#{ordenservicioclienteAction.datoEdicion.razonsocial}" disabled="#{!ordenservicioclienteAction.edicion}"/>
                                    </h:panelGrid>
                                    <p:outputLabel for="tiposervicio"  value="Tipo Servicio:" />
                                    <p:selectOneMenu id="tiposervicio" value="#{ordenservicioclienteAction.datoEdicion.tipo_servicio}"  disabled="#{!ordenservicioclienteAction.edicion}">
                                        <f:selectItem itemLabel="Fijo" itemValue="F"/>
                                        <f:selectItem itemLabel="Especial" itemValue="E"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Doc. Referencia:" />
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border,no-border" style="margin-left: -10px;">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.verCntDocReferencia()}" 
                                                    disabled="#{!ordenservicioclienteAction.edicion}"  icon="ui-icon-search">
                                        </p:commandButton>
                                        <p:outputLabel for="ambito_servicio"  value="Ámbito:" />
                                        <p:selectOneMenu id="ambito_servicio" value="#{ordenservicioclienteAction.datoEdicion.ambito_servicio}"  disabled="#{!ordenservicioclienteAction.edicion}">
                                            <f:selectItem itemLabel="Local" itemValue="L"/>
                                            <f:selectItem itemLabel="Provincial" itemValue="P"/>
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                    <p:outputLabel value="" />
                                    <p:dataTable id="tabledocreferencia" widgetVar="docreferencia" 
                                                 value="#{ordenservicioclienteAction.listDocreferencia}" 
                                        var="docreferencia" 
                                        selection="#{ordenservicioclienteAction.selectDocreferencia}" 
                                        rowKey="#{docreferencia.idreferencia}" 
                                       rows="10"
                                       resizableColumns="true" 
                                       editable="true"
                                       style="width: 100%">
                                        <p:ajax event="rowEditCancel" listener="#{ordenservicioclienteAction.onRowCancelDocreferencia}"/>
                                       <p:ajax event="rowDblselect" listener="#{ordenservicioclienteAction.onCheckCotizacionventa()}" />
                                       <p:column headerText="Documento" sortBy="#{docreferencia.iddocumento}" filterBy="#{docreferencia.iddocumento}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 20%;padding: 3px !important;text-align: center">
                                           <h:outputText value="#{docreferencia.iddocumento}" />
                                       </p:column> 
                                       <p:column headerText="Serie" sortBy="#{docreferencia.serie}" filterBy="#{docreferencia.serie}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 20%;padding: 3px !important;text-align: center">
                                           <h:outputText value="#{docreferencia.serie}" />
                                       </p:column> 
                                       <p:column headerText="Número" sortBy="#{docreferencia.numero}" filterBy="#{docreferencia.numero}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 20%;padding: 3px !important;text-align: center">
                                           <h:outputText value="#{docreferencia.numero}" />
                                       </p:column> 
                                       <p:column style="width:20%;" filterBy="#{docreferencia.fecha}" filterMatchMode="contains" sortBy="#{docreferencia.fecha}">
                                           <f:facet name="header">
                                               <h:outputText value="FECHA" />
                                           </f:facet>
                                           <h:outputText value="#{docreferencia.fecha}">
                                               <f:convertDateTime type="date" pattern="dd/MM/yyyy" />
                                           </h:outputText>
                                       </p:column>
                                       <p:column style="width:10%">
                                            <p:rowEditor/>
                                        </p:column>
                                   </p:dataTable>
                                </p:panelGrid>
                            </div> 
                        </p:fieldset> 
                    </div>
                    <div class="ui-grid-row">
                        <p:tabView>
                            <p:tab title="Detalle Orden Servicio">
                                <p:dataTable id="lstdordenserviciocliente" var="lstdordenserviciocliente" value="#{ordenservicioclienteAction.lstdordenserviciocliente}" widgetVar="lstdordenserviciocliente"
                                paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{ordenservicioclienteAction.selectDordenserviciocliente}" rowKey="#{lstdordenserviciocliente.item}">
                                   <p:ajax event="rowSelect" listener="#{ordenservicioclienteAction.onRowSelectDordenservicio}" />
                                   <f:facet name="{Comandos}">
                                       <p:commandButton value="Editar" ajax="true" image="ui-icon-edit" actionListener="#{ordenservicioclienteAction.editarDordenserviciocliente()}" disabled="#{ordenservicioclienteAction.botonEditarDOrdenservicio}"/> 
                                       <p:commandButton value="Eliminar" ajax="true" image="ui-icon-eliminar" actionListener="#{ordenservicioclienteAction.eliminarDordenserviciocliente()}" disabled="#{ordenservicioclienteAction.botonEliminarDOrdenservicio}"/>
                                   </f:facet>
                                   <p:column style="width:10%;" filterBy="#{lstdordenserviciocliente.item}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.item}">
                                       <f:facet name="header">
                                           <h:outputText value="N°"/>
                                       </f:facet>
                                       <h:outputText value="#{lstdordenserviciocliente.item}"/>
                                   </p:column>
                                   <p:column style="width:30%;" filterBy="#{lstdordenserviciocliente.descripcion}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.descripcion}">
                                       <f:facet name="header" >
                                           <h:outputText value="Descripción" />
                                       </f:facet>
                                       <h:outputText value="#{lstdordenserviciocliente.descripcion}" />
                                   </p:column>
                                   <p:column style="width:10%;" filterBy="#{lstdordenserviciocliente.placa_cliente}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.placa_cliente}">
                                       <f:facet name="header" >
                                           <h:outputText value="Placa Cliente" />
                                       </f:facet>
                                       <h:outputText value="#{lstdordenserviciocliente.placa_cliente}" />
                                   </p:column>
                                   <p:column style="width:10%;" filterBy="#{lstdordenserviciocliente.hora_reqConvert}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.hora_reqConvert}">
                                       <f:facet name="header">
                                           <h:outputText value="H. Req." />
                                       </f:facet>
                                       <h:outputText value="#{lstdordenserviciocliente.hora_reqConvert}">
                                           <f:convertDateTime type="both" pattern="HH:mm a" timeZone="America/Lima" />
                                       </h:outputText>
                                   </p:column>
                                   <p:column style="width:20%;" filterBy="#{lstdordenserviciocliente.fecha_fin_servicio}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.fecha_fin_servicio}">
                                       <f:facet name="header">
                                           <h:outputText value="F.Fin" />
                                       </f:facet>
                                       <h:outputText value="#{lstdordenserviciocliente.fecha_fin_servicio}">
                                           <f:convertDateTime type="date" pattern="dd/MM/yyyy" />
                                       </h:outputText>
                                   </p:column>
                                   <p:column style="width:30%;" filterBy="#{lstdordenserviciocliente.vehiculo}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.vehiculo}">
                                       <f:facet name="header" >
                                           <h:outputText value="Vehículo" />
                                       </f:facet>
                                       <h:outputText value="(#{lstdordenserviciocliente.idvehiculo})#{lstdordenserviciocliente.vehiculo}" />
                                   </p:column>
                                </p:dataTable> 
                            </p:tab>
                            <p:tab title="Asignación Personal">
                                <p:dataTable id="listPersonal_Servicio" var="listPersonal_Servicio" value="#{ordenservicioclienteAction.listPersonal_Servicio}" widgetVar="listPersonal_Servicio"
                                    paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                    paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{ordenservicioclienteAction.selectPersonal_servicio}" rowKey="#{listPersonal_Servicio.item2}">
                                       <p:ajax event="rowSelect" listener="#{ordenservicioclienteAction.onRowSelectPersonal_Servicio}" />
                                       <f:facet name="{Comandos}">
                                           <p:commandButton value="Agregar" ajax="true" image="ui-icon-nuevo" actionListener="#{ordenservicioclienteAction.addPersonal_servicio()}" disabled="#{ordenservicioclienteAction.botonNuevoPersonal_servicio}"/>
                                           <p:commandButton value="Editar" ajax="true" image="ui-icon-edit" actionListener="#{ordenservicioclienteAction.editarPersonal_servicio()}" disabled="#{(ordenservicioclienteAction.botonEditarPersonal_servicio or ordenservicioclienteAction.botonNuevoPersonal_servicio)?true:false}"/> 
                                           <p:commandButton value="Eliminar" ajax="true" image="ui-icon-eliminar" actionListener="#{ordenservicioclienteAction.eliminarPersonal_servicio()}" disabled="#{(ordenservicioclienteAction.botonEliminarPersonal_servicio or ordenservicioclienteAction.botonNuevoPersonal_servicio)?true:false}"/>
                                       </f:facet>
                                       <p:column style="width:10%;" filterBy="#{listPersonal_Servicio.item2}" filterMatchMode="contains" sortBy="#{listPersonal_Servicio.item2}">
                                           <f:facet name="header">
                                               <h:outputText value="N°"/>
                                           </f:facet>
                                           <h:outputText value="#{listPersonal_Servicio.item2}"/>
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listPersonal_Servicio.cargo}" filterMatchMode="contains" sortBy="#{listPersonal_Servicio.cargo}">
                                           <f:facet name="header" >
                                               <h:outputText value="Cargo" />
                                           </f:facet>
                                           <h:outputText value="#{listPersonal_Servicio.cargo}" />
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listPersonal_Servicio.dni}" filterMatchMode="contains" sortBy="#{listPersonal_Servicio.dni}">
                                           <f:facet name="header" >
                                               <h:outputText value="Dni" />
                                           </f:facet>
                                           <h:outputText value="#{listPersonal_Servicio.dni}" />
                                       </p:column>
                                       <p:column style="width:30%;" filterBy="#{listPersonal_Servicio.nombres}" filterMatchMode="contains" sortBy="#{listPersonal_Servicio.nombres}">
                                           <f:facet name="header" >
                                               <h:outputText value="Nombre" />
                                           </f:facet>
                                           <h:outputText value="#{listPersonal_Servicio.nombres}" />
                                       </p:column>
                                   </p:dataTable> 
                            </p:tab>
                            <p:tab title="Rutas">
                                <p:dataTable id="listRuta_servicios" var="listRuta_servicios" value="#{ordenservicioclienteAction.listRuta_servicios}" widgetVar="listRuta_servicios"
                                    paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                    paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{ordenservicioclienteAction.selectRuta_servicios}" rowKey="#{listRuta_servicios.itemruta}">
                                       <p:ajax event="rowSelect" listener="#{ordenservicioclienteAction.onRowSelectRuta_Servicios}" />
                                       <f:facet name="{Comandos}">
                                           <p:commandButton value="Ruta" ajax="true" image="ui-icon-map" actionListener="#{ordenservicioclienteAction.viewRuta()}" />
                                           <p:commandButton value="Nuevo" ajax="true" image="ui-icon-nuevo" actionListener="#{ordenservicioclienteAction.nuevoRuta_servicios()}" disabled="#{ordenservicioclienteAction.botonNuevoRuta_servicios}"/>
                                           <p:commandButton value="Editar" ajax="true" image="ui-icon-edit" actionListener="#{ordenservicioclienteAction.editarRuta_servicios()}" disabled="#{(ordenservicioclienteAction.botonEditarRuta_servicios or ordenservicioclienteAction.botonNuevoRuta_servicios)?true:false}"/> 
                                           <p:commandButton value="Eliminar" ajax="true" image="ui-icon-eliminar" actionListener="#{ordenservicioclienteAction.eliminarRuta_servicios()}" disabled="#{(ordenservicioclienteAction.botonEliminarRuta_servicios or ordenservicioclienteAction.botonNuevoRuta_servicios)?true:false}"/>
                                       </f:facet>
                                       <p:column style="width:10%;" filterBy="#{listRuta_servicios.itemruta}" filterMatchMode="contains" sortBy="#{listRuta_servicios.itemruta}">
                                           <f:facet name="header">
                                               <h:outputText value="N°"/>
                                           </f:facet>
                                           <h:outputText value="#{listRuta_servicios.itemruta}"/>
                                       </p:column>
                                       <p:column style="width:40%;" filterBy="#{listRuta_servicios.ruta}" filterMatchMode="contains" sortBy="#{lstdordenserviciocliente.ruta}">
                                           <f:facet name="header" >
                                               <h:outputText value="Ruta" />
                                           </f:facet>
                                           <h:outputText value="#{listRuta_servicios.ruta}" />
                                       </p:column>
                                       <p:column style="width:15%;" filterBy="#{listRuta_servicios.latitud}" filterMatchMode="contains" sortBy="#{listRuta_servicios.latitud}">
                                           <f:facet name="header" >
                                               <h:outputText value="Latitud" />
                                           </f:facet>
                                           <h:outputText value="#{listRuta_servicios.latitud}" />
                                       </p:column>
                                       <p:column style="width:15%;" filterBy="#{listRuta_servicios.longitud}" filterMatchMode="contains" sortBy="#{listRuta_servicios.longitud}">
                                           <f:facet name="header" >
                                               <h:outputText value="Longitud" />
                                           </f:facet>
                                           <h:outputText value="#{listRuta_servicios.longitud}" />
                                       </p:column>
                                       <p:column style="width:30%;" filterBy="#{listRuta_servicios.glosa}" filterMatchMode="contains" sortBy="#{listRuta_servicios.glosa}">
                                           <f:facet name="header" >
                                               <h:outputText value="Glosa" />
                                           </f:facet>
                                           <h:outputText value="#{listRuta_servicios.glosa}" />
                                       </p:column>
                                   </p:dataTable> 
                            </p:tab>
                        </p:tabView>
                        <p:dialog id="dlgnew_dordenserviciocliente" header="..::Detalle::." widgetVar="dlgnew_dordenserviciocliente" modal="true" showEffect="popup" closable="false">
                            <p:panelGrid columns="1" columnClasses="no-border">
                                <p:panelGrid columns="2" columnClasses="no-border, no-border,no-border">
                                    <p:outputLabel value="Id: " />
                                    <p:panelGrid columns="3" columnClasses="no-border, no-border, no-border">
                                        <p:inputText size="3" disabled="true" value="#{ordenservicioclienteAction.dordenserviciocliente.idordenservicio}" />
                                        <p:outputLabel  value="N°" />
                                        <p:inputText size="40"  disabled="true" value="#{ordenservicioclienteAction.dordenserviciocliente.item}" />
                                    </p:panelGrid>
                                    <p:outputLabel value="Vehículo" escape="false" />
                                    <h:panelGrid id="cntConsumidor" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.verCntConsumidor()}" icon="ui-icon-search" disabled="true">
                                            <p:ajax event="dialogReturn" listener="#{ordenservicioclienteAction.valorConsumidor}" update="cntConsumidor"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: center" size="3" readonly="true"  value="#{ordenservicioclienteAction.dordenserviciocliente.idvehiculo}" />
                                        <p:inputText size="41" readonly="true" value="#{ordenservicioclienteAction.dordenserviciocliente.vehiculo}" />
                                    </h:panelGrid>
                                    <p:outputLabel value="Placa:" />
                                    <p:inputTextarea  cols="60" rows="2"  value="#{ordenservicioclienteAction.dordenserviciocliente.placa_cliente}" onkeyup="javascript:this.value = this.value.toUpperCase();" disabled="#{!ordenservicioclienteAction.edicion}">
                                    </p:inputTextarea>
                                    <p:outputLabel for="hora_req" value="Hora. Req.:" />
                                    <p:calendar id="hora_req" value="#{ordenservicioclienteAction.dordenserviciocliente.hora_reqConvert}" pattern="HH:mm" timeOnly="true"  />
                                    <p:outputLabel for="fecha_fin_servicio" value="F. Fin:" />
                                    <p:calendar id="fecha_fin_servicio" value="#{ordenservicioclienteAction.dordenserviciocliente.fecha_fin_servicio}" pattern="dd-MM-yyyy" mask="true" />
                                    <p:outputLabel for="idreferenciacot" value="Id Ref.:" />
                                    <p:inputText id="idreferenciacot" size="40"  disabled="true" value="#{ordenservicioclienteAction.dordenserviciocliente.idreferencia}" />
                                    <p:outputLabel for="itemreferencia" value="Item Ref.:" />
                                    <p:inputText id="itemreferencia" size="40"  disabled="true" value="#{ordenservicioclienteAction.dordenserviciocliente.itemreferencia}" />
                                </p:panelGrid>
                                <br/>
                                <p:toolbar>
                                    <f:facet name="right">
                                        <p:commandButton value="Grabar" ajax="true" actionListener="#{ordenservicioclienteAction.grabarDordenserviciocliente}" image="ui-icon-grabar" update="datos:growl"/>
                                        <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgnew_dordenserviciocliente').hide()" />
                                    </f:facet>
                                </p:toolbar>                          
                            </p:panelGrid>                      
                        </p:dialog>
                        <p:dialog id="dlgnew_ruta_servicios" header="..::Ruta - Servicio::." widgetVar="dlgnew_ruta_servicios" modal="true" showEffect="popup" closable="false">
                            <p:panelGrid columns="1" columnClasses="no-border">
                                <p:panelGrid columns="2" columnClasses="no-border, no-border,no-border">
                                    <p:outputLabel value="Id: " />
                                    <p:inputText size="15" disabled="true" value="#{ordenservicioclienteAction.ruta_servicios.itemruta}" />
                                    <p:outputLabel value="Ruta:" escape="false" />
                                    <h:panelGrid id="cntRutas" cellpadding="0" cellspacing="0" columns="2">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.verCntRuta}" 
                                                        disabled="#{!ordenservicioclienteAction.edicion}"  icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{ordenservicioclienteAction.valorRuta}" update="cntRutas"/>
                                        </p:commandButton>
                                        <p:inputText  size="30" readonly="true"  value="#{ordenservicioclienteAction.ruta_servicios.ruta}" />
                                    </h:panelGrid>
                                    <h:outputText value="Mapa:" />
                                    <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.openGMap}" icon="ui-icon-search">
                                        <p:ajax event="dialogReturn" listener="#{ordenservicioclienteAction.valorGMap}" update="latitud,longitud"/>
                                    </p:commandButton>
                                    <p:outputLabel value="Latitud:" escape="false" />
                                    <p:inputText id="latitud" size="30" value="#{ordenservicioclienteAction.ruta_servicios.latitud}" readonly="#{ordenservicioclienteAction.datoEdicion.tipo_servicio=='E'?true:false}"/>
                                    <p:outputLabel value="Longitud:" escape="false" />
                                    <p:inputText id="longitud" size="30" value="#{ordenservicioclienteAction.ruta_servicios.longitud}" readonly="#{ordenservicioclienteAction.datoEdicion.tipo_servicio=='E'?true:false}"/>
                                    <p:outputLabel value="Glosa: " />
                                    <p:inputTextarea id="glosa" cols="30" rows="2" value="#{ordenservicioclienteAction.ruta_servicios.glosa}" />
                                </p:panelGrid>
                                <br/>
                                <p:toolbar>
                                    <f:facet name="right">
                                        <p:commandButton value="Grabar" ajax="true" actionListener="#{ordenservicioclienteAction.grabarRuta_servicio()}" image="ui-icon-grabar" update="datos:growl"/>
                                        <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgnew_ruta_servicios').hide()" />
                                    </f:facet>
                                </p:toolbar>                          
                            </p:panelGrid>                      
                        </p:dialog>
                        <p:dialog id="dlgnew_personal_servicio" header="..::Personal - Servicio::." widgetVar="dlgnew_personal_servicio" modal="true" showEffect="popup" closable="false">
                            <p:panelGrid columns="1" columnClasses="no-border">
                                <p:panelGrid columns="2" columnClasses="no-border, no-border,no-border">
                                    <p:outputLabel value="Id: " />
                                    <p:panelGrid columns="3" columnClasses="no-border, no-border, no-border">
                                        <p:inputText size="15" disabled="true" value="#{ordenservicioclienteAction.personal_servicio.idordenservicio}" />
                                        <p:outputLabel  value="N°" />
                                        <p:inputText size="10"  disabled="true" value="#{ordenservicioclienteAction.personal_servicio.item}" />
                                    </p:panelGrid>
                                    <p:outputLabel value="Personal:" escape="false" />
                                    <h:panelGrid id="cntCliePersonal" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.verCntClieprovPersonal}" 
                                                         disabled="#{!ordenservicioclienteAction.edicion}"  icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{ordenservicioclienteAction.valorClieprovPersonal}" update="cntCliePersonal"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{ordenservicioclienteAction.personal_servicio.dni}"/>
                                        <p:inputText size="50" readonly="true" value="#{ordenservicioclienteAction.personal_servicio.nombres}" />
                                    </h:panelGrid>
                                    <p:outputLabel value="Cargo:" escape="false" />
                                    <h:panelGrid id="cntCargos_personal" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{ordenservicioclienteAction.verCntCargos_personal()}" 
                                                         disabled="#{!ordenservicioclienteAction.edicion}"  icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{ordenservicioclienteAction.valorCargos_personal}" update="cntCargos_personal"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{ordenservicioclienteAction.personal_servicio.idcargo}"/>
                                        <p:inputText size="50" readonly="true" value="#{ordenservicioclienteAction.personal_servicio.cargo}" />
                                    </h:panelGrid>
                                    <p:outputLabel for="fecha_operacion" value="F. Operación:" />
                                    <p:calendar id="fecha_operacion" value="#{ordenservicioclienteAction.personal_servicio.fechaoperacion}" pattern="dd-MM-yyyy" mask="true" />
                                </p:panelGrid>
                                <p:dataTable id="listDpersonal_Servicio" var="listDpersonal_Servicio" value="#{ordenservicioclienteAction.listDpersonal_Servicio}" widgetVar="listDpersonal_Servicio"
                                    paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                    paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{ordenservicioclienteAction.selectDPersonal_servicio}" rowKey="#{listDpersonal_Servicio.item}">
                                       <p:ajax event="rowSelect" listener="#{ordenservicioclienteAction.onRowSelectDPersonal_Servicio}" />
                                       <f:facet name="{Comandos}">
                                           <p:commandButton value="Nuevo" ajax="true" image="ui-icon-nuevo" actionListener="#{ordenservicioclienteAction.nuevoDPersonal_servicio()}"/>
                                           <p:commandButton value="Editar" ajax="true" image="ui-icon-edit" actionListener="#{ordenservicioclienteAction.editarDPersonal_servicio()}" disabled="#{ordenservicioclienteAction.botonEditarDPersonal_servicio}"/> 
                                           <p:commandButton value="Eliminar" ajax="true" image="ui-icon-eliminar" actionListener="#{ordenservicioclienteAction.eliminarDPersonal_servicio()}" disabled="#{ordenservicioclienteAction.botonEliminarDPersonal_servicio}"/>
                                       </f:facet>
                                       <p:column style="width:10%;" filterBy="#{listDpersonal_Servicio.item}" filterMatchMode="contains" sortBy="#{listDpersonal_Servicio.item}">
                                           <f:facet name="header">
                                               <h:outputText value="N°"/>
                                           </f:facet>
                                           <h:outputText value="#{listDpersonal_Servicio.item}"/>
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listDpersonal_Servicio.fhora_req}" filterMatchMode="contains" sortBy="#{listDpersonal_Servicio.fhora_req}">
                                           <f:facet name="header">
                                               <h:outputText value="H. Req." />
                                           </f:facet>
                                           <h:outputText value="#{listDpersonal_Servicio.fhora_req}">
                                               <f:convertDateTime type="both" pattern="HH:mm a" timeZone="America/Lima" />
                                           </h:outputText>
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listDpersonal_Servicio.fhora_llegada}" filterMatchMode="contains" sortBy="#{listDpersonal_Servicio.fhora_llegada}">
                                           <f:facet name="header">
                                               <h:outputText value="H. Llegada." />
                                           </f:facet>
                                           <h:outputText value="#{listDpersonal_Servicio.fhora_llegada}">
                                               <f:convertDateTime type="both" pattern="HH:mm a" timeZone="America/Lima" />
                                           </h:outputText>
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listDpersonal_Servicio.fhora_inicio_serv}" filterMatchMode="contains" sortBy="#{listDpersonal_Servicio.fhora_inicio_serv}">
                                           <f:facet name="header">
                                               <h:outputText value="H. Inicio." />
                                           </f:facet>
                                           <h:outputText value="#{listDpersonal_Servicio.fhora_inicio_serv}">
                                               <f:convertDateTime type="both" pattern="HH:mm a" timeZone="America/Lima" />
                                           </h:outputText>
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listDpersonal_Servicio.fhora_fin_serv}" filterMatchMode="contains" sortBy="#{listDpersonal_Servicio.fhora_fin_serv}">
                                           <f:facet name="header">
                                               <h:outputText value="H. Fin." />
                                           </f:facet>
                                           <h:outputText value="#{listDpersonal_Servicio.fhora_fin_serv}">
                                               <f:convertDateTime type="both" pattern="HH:mm a" timeZone="America/Lima" />
                                           </h:outputText>
                                       </p:column>
                                       <p:column style="width:20%;" filterBy="#{listDpersonal_Servicio.fhora_liberacion}" filterMatchMode="contains" sortBy="#{listDpersonal_Servicio.fhora_liberacion}">
                                           <f:facet name="header">
                                               <h:outputText value="H. Liberación." />
                                           </f:facet>
                                           <h:outputText value="#{listDpersonal_Servicio.fhora_liberacion}">
                                               <f:convertDateTime type="both" pattern="HH:mm a" timeZone="America/Lima" />
                                           </h:outputText>
                                       </p:column>
                               </p:dataTable>  
                                <br/>
                                <p:toolbar>
                                    <f:facet name="right">
                                        <p:commandButton value="Grabar" ajax="true" actionListener="#{ordenservicioclienteAction.grabarPersonal_Servicion()}" image="ui-icon-grabar" update="datos:growl"/>
                                        <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgnew_personal_servicio').hide()" />
                                    </f:facet>
                                </p:toolbar>                          
                            </p:panelGrid>                      
                        </p:dialog>
                        <p:dialog id="dlgnew_dpersonal_servicio" header="..::Detalle Personal - Servicio::." widgetVar="dlgnew_dpersonal_servicio" modal="true" showEffect="popup" closable="false">
                            <p:panelGrid columns="1" columnClasses="no-border">
                                <p:panelGrid columns="2" columnClasses="no-border, no-border,no-border">
                                    <p:outputLabel value="N° Detalle: " />
                                    <p:panelGrid columns="5" columnClasses="no-border, no-border, no-border,no-border, no-border">
                                        <p:inputText size="15" disabled="true" value="#{ordenservicioclienteAction.dpersonal_servicio.item2}" />
                                        <p:outputLabel value="N°"/>
                                        <p:inputText size="10"  disabled="true" value="#{ordenservicioclienteAction.dpersonal_servicio.item}" />
                                    </p:panelGrid>
                                    <p:outputLabel for="hora_req_personal" value="Hora. Req.:" />
                                    <p:calendar id="hora_req_personal" value="#{ordenservicioclienteAction.dpersonal_servicio.fhora_req}" pattern="HH:mm" timeOnly="true" disabled="true" />
                                    <p:outputLabel for="hora_llegada" value="Hora. Llegada:" />
                                    <p:calendar id="hora_llegada" value="#{ordenservicioclienteAction.dpersonal_servicio.fhora_llegada}" pattern="HH:mm" timeOnly="true"  />
                                    <p:outputLabel for="hora_inicio" value="Hora. Inicio.:" />
                                    <p:calendar id="hora_inicio" value="#{ordenservicioclienteAction.dpersonal_servicio.fhora_inicio_serv}" pattern="HH:mm" timeOnly="true"  />
                                    <p:outputLabel for="hora_fin" value="Hora. Fin.:" />
                                    <p:calendar id="hora_fin" value="#{ordenservicioclienteAction.dpersonal_servicio.fhora_fin_serv}" pattern="HH:mm" timeOnly="true"  />
                                    <p:outputLabel for="hora_liberacion" value="Hora. Liberación:" />
                                    <p:calendar id="hora_liberacion" value="#{ordenservicioclienteAction.dpersonal_servicio.fhora_liberacion}" pattern="HH:mm" timeOnly="true"  />
                                </p:panelGrid>
                                <br/>
                                <p:toolbar>
                                    <f:facet name="right">
                                        <p:commandButton value="Grabar" ajax="true" actionListener="#{ordenservicioclienteAction.grabarDPersonal_Servicion()}" image="ui-icon-grabar" update="listDpersonal_Servicio"/>
                                        <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgnew_dpersonal_servicio').hide()" />
                                    </f:facet>
                                </p:toolbar>   
                            </p:panelGrid>
                        </p:dialog>   
                    </div>
                    <p:dialog id="dlgnew_cotizacionventas" header="..:: COTIZACIÓN VENTAS ::." widgetVar="dlgnew_cotizacionventas" modal="true" showEffect="popup" closable="false">
                        <p:toolbar>
                            <f:facet name="right">
                                <p:commandButton value="Asignar" ajax="true" actionListener="#{ordenservicioclienteAction.addDocreferencia()}" image="ui-icon-right"/>
                                <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgnew_cotizacionventas').hide()" />
                            </f:facet>
                        </p:toolbar> 
                        <p:fieldset legend="..:: DOCUMENTO ::."  style="width: 100%">
                            <p:dataTable id="cotizacionventas" widgetVar="cotizacionventas" 
                                        value="#{ordenservicioclienteAction.listCotizacionventas}" 
                                        var="cotizacionventas" 
                                        selection="#{ordenservicioclienteAction.selectCotizacionventas}" 
                                       rowKey="#{cotizacionventas.idcotizacionv}" 
                                       rows="10"
                                       resizableColumns="true" 
                                       style="width: 100%">
                                <p:ajax event="rowSelectRadio" listener="#{ordenservicioclienteAction.onCheckCotizacionventa()}" update="datos:dcotizacionventas"/>
                               <p:column selectionMode="single" style="width:16px;text-align:center"/>
                               <p:column headerText="N° Doc" sortBy="#{cotizacionventas.iddocumento}" filterBy="#{cotizacionventas.iddocumento}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                   <h:outputText value="#{cotizacionventas.iddocumento}" />
                               </p:column> 
                               <p:column headerText="Serie" sortBy="#{cotizacionventas.serie}" filterBy="#{cotizacionventas.serie}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                   <h:outputText value="#{cotizacionventas.serie}" />
                               </p:column> 
                               <p:column headerText="Número" sortBy="#{cotizacionventas.numero}" filterBy="#{cotizacionventas.numero}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                   <h:outputText value="#{cotizacionventas.numero}" />
                               </p:column>
                               <p:column headerText="Doc." sortBy="#{cotizacionventas.idclieprov}" filterBy="#{cotizacionventas.idclieprov}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 20%;padding: 3px !important;text-align: center">
                                   <h:outputText value="#{cotizacionventas.idclieprov}" />
                               </p:column> 
                               <p:column headerText="Razon" sortBy="#{cotizacionventas.razon_social}" filterBy="#{cotizacionventas.razon_social}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 50%;padding: 3px !important;text-align: center">
                                   <h:outputText value="#{cotizacionventas.razon_social}" />
                               </p:column> 
                               <p:column style="width:20%;" filterBy="#{cotizacionventas.fecha}" filterMatchMode="contains" sortBy="#{cotizacionventas.fecha}">
                                   <f:facet name="header">
                                       <h:outputText value="FECHA" />
                                   </f:facet>
                                   <h:outputText value="#{cotizacionventas.fecha}">
                                       <f:convertDateTime type="date" pattern="dd/MM/yyyy" />
                                   </h:outputText>
                               </p:column>
                           </p:dataTable>
                        </p:fieldset>
                        <p:fieldset legend="..:: DETALLE COTIZACIÓN VENTAS ::."  style="width: 100%">
                            <p:dataTable id="dcotizacionventas" widgetVar="dcotizacionventas" 
                                        value="#{ordenservicioclienteAction.listDcotizacionventas}" 
                                    var="dcotizacionventas" 
                                    rowKey="#{dcotizacionventas.item}" 
                                    selection="#{ordenservicioclienteAction.selectListDcotizacionventas}"
                                    rows="10"
                                    resizableColumns="true" 
                                    rowSelectMode="checkbox" style="width: 100%">
                                    <p:column headerText="" selectionMode="multiple" style="width:16px;text-align:center"/>
                                    <p:column headerText="Item" sortBy="#{dcotizacionventas.item}" filterBy="#{dcotizacionventas.item}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                        <h:outputText value="#{dcotizacionventas.item}" />
                                    </p:column> 
                                    <p:column headerText="IdProducto" sortBy="#{dcotizacionventas.idproducto}" filterBy="#{dcotizacionventas.idproducto}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                        <h:outputText value="#{dcotizacionventas.idproducto}" />
                                    </p:column> 
                                    <p:column headerText="Descripción" sortBy="#{dcotizacionventas.descripcion}" filterBy="#{dcotizacionventas.descripcion}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 40%;padding: 3px !important;text-align: center">
                                        <h:outputText value="#{dcotizacionventas.descripcion}" />
                                    </p:column> 
                                    <p:column headerText="U.M." sortBy="#{dcotizacionventas.idmedida}" filterBy="#{dcotizacionventas.idmedida}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                        <h:outputText value="#{dcotizacionventas.idmedida}" />
                                    </p:column> 
                                    <p:column headerText="Cantidad" sortBy="#{dcotizacionventas.cantidad}" filterBy="#{dcotizacionventas.cantidad}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                        <h:outputText value="#{dcotizacionventas.cantidad}" />
                                    </p:column>
                                    <p:column headerText="Precio" sortBy="#{dcotizacionventas.precio}" filterBy="#{dcotizacionventas.precio}" filterMatchMode="contains" filterStyle="width: 75%" style="width: 10%;padding: 3px !important;text-align: center">
                                        <h:outputText value="#{dcotizacionventas.precio}" />
                                    </p:column>
                           </p:dataTable>
                        </p:fieldset>                   
                    </p:dialog>
                </div>
            </p:panelGrid>
            <p:growl id="growl" life="4000" showDetail="false"  />
            <cmp:mDialogElimina_lst id="cmpDialog" bean="#{ordenservicioclienteAction}" ventana="MNT" />
        </h:form>
    </ui:define>
</ui:composition>