<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="templatebanco.xhtml"
                xmlns:cmp="http://xmlns.jcp.org/jsf/composite/cmp">
    <ui:define name="metadata">
    </ui:define>
    <ui:define name="body">
        <script type='text/javascript'>
            function synchronizeRowsHeight() {
              //aligning table header row
              var $leftHeaderRow = $('.ui-datatable-frozenlayout-left .ui-datatable-scrollable-header-box tr');
              var $rightHeaderRow = $('.ui-datatable-frozenlayout-right .ui-datatable-scrollable-header-box tr');
              $leftHeaderRow.outerHeight(35);//height(px) in int    
              $rightHeaderRow.outerHeight(35);//height(px) in int   

              //aligning table data rows
               var $leftRows = $('.ui-datatable-frozenlayout-left .ui-datatable-scrollable-body tr');
               var $rightRows = $('.ui-datatable-frozenlayout-right .ui-datatable-scrollable-body tr');
               $leftRows.each(function (index) {
                 var $leftRow = $leftRows.eq(index); 
                 var $rightRow = $rightRows.eq(index);
                 $rightRow.innerHeight($leftRow.innerHeight());
                 $leftRow.innerHeight($rightRow.innerHeight());       
              });   
            }
            </script>
        <h:form id="datos">
            #{tareowebAction.getFillTareoweb()}
            <cmp:barra_mnt bean="#{tareowebAction}"/>
            <p:panelGrid columns="1" style="width:100%; text-align: left" columnClasses="no-border">
                <f:facet name="header">
                    <p:outputLabel value="#{tareowebAction.tituloHead}"/>
                </f:facet>
                <div class="ui-grid">
                    <div class="ui-grid-row">
                        <p:fieldset legend="Datos" style="width: 100%" toggleable="true" toggleSpeed="500">
                            <p:panelGrid  columns="8" columnClasses="no-border,no-border,no-border,no-border,no-border,no-border,no-border,no-border" style="width: 100%">
                                <p:outputLabel value="Punto Emisión"/>
                                <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareowebAction.datoEdicion.idemisor}" disabled="true"/>
                                <p:inputText size="50" readonly="true" value="#{tareowebAction.datoEdicion.emisor}" disabled="true"/>

                                <p:outputLabel value="Periódo"/>
                                <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareowebAction.periodoDisenio}" disabled="true"/>
                                <p:inputText size="10" readonly="true" value="#{tareowebAction.mesNombreDisenio}" disabled="true"/>
                            </p:panelGrid>
                            <div class="ui-grid-col-6">
                                <p:panelGrid  columns="2" columnClasses="no-border, no-border" style="width: 100%">
                                    <p:outputLabel value="Documentos"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border,no-border" style="margin-left: -10px;">
                                        <p:selectOneMenu id="cboiddoc" value="#{tareowebAction.datoEdicion.iddocumento}" style="width:200px" disabled="#{!tareowebAction.edicion}">
                                            <p:ajax listener="#{tareowebAction.oncDocChange}" update="cboserie num" />
                                            <f:selectItems value="#{tareowebAction.listDocumentos}" var="iddocs" itemLabel="#{iddocs.descripcion}" itemValue="#{iddocs.iddocumento}"/>
                                        </p:selectOneMenu>
                                        <p:selectOneMenu id="cboserie" value="#{tareowebAction.datoEdicion.serie}" style="width:70px" disabled="#{!tareowebAction.edicion}">
                                            <f:selectItems value="#{tareowebAction.listNumemisor}" var="nume" itemLabel="#{nume.serie}" itemValue="#{nume.serie}"/>
                                        </p:selectOneMenu>
                                        <p:inputText id="num" style="width: 90px !important" value="#{tareowebAction.datoEdicion.numero}" disabled="#{!tareowebAction.edicion}"/>
                                    </p:panelGrid>
                                    <p:outputLabel value="Sucursal"/>
                                    <p:panelGrid  columns="2" columnClasses="no-border, no-border" >
                                        <p:inputText  style="text-align: left;margin-left: 0px;" size="15" readonly="true"  value="#{tareowebAction.datoEdicion.idsucursal}" disabled="#{!tareowebAction.edicion}"/>
                                        <p:inputText size="50" readonly="true" value="#{tareowebAction.datoEdicion.sucursal}" disabled="#{!tareowebAction.edicion}"/>
                                    </p:panelGrid>
                                    <p:outputLabel value="Responsable:" escape="false" />
                                    <h:panelGrid id="cntCliePersonalS" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{tareowebAction.verCntClieprovPersonalS}" 
                                                         disabled="#{!tareowebAction.edicion}"  icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{tareowebAction.valorClieprovPersonalS}" update="cntCliePersonalS"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareowebAction.datoEdicion.idresponsable}"/>
                                        <p:inputText size="50" readonly="true" value="#{tareowebAction.datoEdicion.responsable}" />
                                    </h:panelGrid>
                                </p:panelGrid>
                            </div>
                            <div class="ui-grid-col-6">
                                <p:panelGrid  columns="2" columnClasses="no-border, no-border" >
                                    <p:outputLabel value="Fecha" escape="false"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border, no-border" >
                                        <p:calendar id="button1" value="#{tareowebAction.datoEdicion.fecha}" showOn="button" pattern="dd/MM/yyyy" mask="true" disabled="#{!tareowebAction.edicion}">
                                            <!--<p:ajax event="dateSelect" listener="{planventaAction.updateCampañas}" update="lstCampaña"/>-->
                                        </p:calendar>
                                        <p:outputLabel for="estado"  value="Estado:" />
                                        <p:selectOneMenu id="estado" value="#{tareowebAction.datoEdicion.idestado}"  disabled="true" style="font-weight: bold">    
                                            <f:selectItems value="#{tareowebAction.listEstado}" var="tipoEstado" itemLabel="#{tipoEstado.descripcion}" itemValue="#{tipoEstado.idestado}" />
                                        </p:selectOneMenu>
                                    </p:panelGrid>                                    
                                    <p:outputLabel value="Almacen" escape="false"/>
                                    <p:selectOneMenu id="idalmacen" value="#{tareowebAction.datoEdicion.idalmacen}" style="width:380px" disabled="#{!tareowebAction.edicion}">
                                        <f:selectItems value="#{tareowebAction.listAlmacenes}" var="almacen" itemLabel="#{almacen.descripcion}" itemValue="#{almacen.idalmacen}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Turno" escape="false"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border,no-border" style="margin-left: -10px;">
                                        <p:selectOneMenu id="idturno" value="#{tareowebAction.datoEdicion.idturnotrabajo}" style="width:150px" disabled="#{!tareowebAction.edicion}">
                                            <f:selectItems value="#{tareowebAction.listTurno_trabajo}" var="turno" itemLabel="#{turno.descripcion}" itemValue="#{turno.idturnotrabajo}"/>
                                        </p:selectOneMenu>
                                        <p:outputLabel for="tiposervicio"  value="Tipo Asistencia:" />
                                        <p:selectOneMenu id="tiposervicio" value="#{tareowebAction.datoEdicion.idtipoasistencia}"  disabled="#{!tareowebAction.edicion}">
                                            <p:ajax listener="#{tareowebAction.onTiposervicio()}"/>
                                            <f:selectItem itemLabel="Asistencia Normal" itemValue="ASN"/>
                                            <f:selectItem itemLabel="Asistencia Regularización " itemValue="ASR"/>
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                </p:panelGrid>
                            </div> 
                        </p:fieldset> 
                    </div>
                </div>
            </p:panelGrid>
            <p:toolbar id="tb" style="font-size: 11px;">
                <f:facet name="left">
                    <h:panelGrid  id="comandos" cellpadding="0" cellspacing="0"  columns="4">
                       <p:commandButton value="Asignar Personal" ajax="true" image="ui-icon-reload" actionListener="#{tareowebAction.openDialogAsignacionPersonal()}" />
                       <p:commandButton value="Agregar Item" ajax="true" image="ui-icon-nuevo" actionListener="#{tareowebAction.openDialogAddItemTareo()}" />
                       <p:commandButton value="Refrescar" ajax="true" image="ui-icon-reload" actionListener="#{tareowebAction.onRefresh()}" />
                       <p:commandButton value="Exportar" ajax="false" image="ui-icon-excel">
                           <p:dataExporter type="xls" target="datos:listDet_tareoweb" fileName="Tareo_Especial_#{tareowebAction.datoEdicion.iddocumento}-#{tareowebAction.datoEdicion.serie}-#{tareowebAction.datoEdicion.numero}"
                                postProcessor="#{tareowebAction.postProcessXLS}"/>
                        </p:commandButton>
                    </h:panelGrid>
                </f:facet>
            </p:toolbar>
            <p:sticky target="tb" />
            <p:dataTable id="listDet_tareoweb" var="listDet_tareoweb" 
                         value="#{tareowebAction.listDet_tareoweb}" 
                widgetVar="listDet_tareoweb" scrollable="true" scrollWidth="543px;" 
                paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px;font-size: 11px;" 
                resizableColumns="true" 
                selection="#{tareowebAction.selectDet_tareoweb}" 
                frozenColumns="7" 
                rowKey="#{listDet_tareoweb.item}" editable="true" editMode="cell">
                <p:ajax event="cellEdit" listener="#{tareowebAction.onCellEdit}" update="listDet_tareoweb"/>
                <p:ajax event="rowSelectRadio" listener="#{tareowebAction.openDialogAsistencia()}"/>
                    <p:column style="width:2%;" sortBy="#{listDet_tareoweb.item}" exportable="false">
                        <f:facet name="header">
                            <h:outputText value="N°"/>
                        </f:facet>
                        <h:outputText value="#{listDet_tareoweb.item}"/>
                     </p:column>
                    <p:column style="width:2%;" filterBy="#{listDet_tareoweb.iddocumento}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.iddocumento}">
                       <f:facet name="header">
                           <h:outputText value="Doc."/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.iddocumento}"/>
                    </p:column>
                    <p:column style="width:4%;" filterBy="#{listDet_tareoweb.serie}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.serie}">
                       <f:facet name="header">
                           <h:outputText value="Serie"/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.serie}"/>
                    </p:column>
                    <p:column style="width:6%;" filterBy="#{listDet_tareoweb.numero}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.numero}">
                       <f:facet name="header">
                           <h:outputText value="Número"/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.numero}"/>
                    </p:column>
                    <p:column style="width:20%;" filterBy="#{listDet_tareoweb.ruc} #{listDet_tareoweb.razon}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.ruc} #{listDet_tareoweb.razon}">
                       <f:facet name="header">
                           <h:outputText value="Cliente"/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.ruc} - #{listDet_tareoweb.razon}"/>
                    </p:column>
                    <p:column style="width:15%;" filterBy="#{listDet_tareoweb.cargo}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.cargo}">
                       <f:facet name="header">
                           <h:outputText value="Cargo"/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.cargo}"/>
                    </p:column>
                    <p:column style="width:30%;" headerText="Personal" filterBy="#{listDet_tareoweb.dni}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.dni}">
                        <p:cellEditor >
                            <f:facet name="output">
                                <h:outputText value="#{listDet_tareoweb.dni} - #{listDet_tareoweb.personal}"/>
                            </f:facet>
                            <f:facet name="input" >
                                <p:autoComplete size="80" id="personal" value="#{tareowebAction.selectPersonal}" maxResults="10" completeMethod="#{tareowebAction.completePersonal}"
                                            var="personal" itemLabel="#{personal.dni}" itemValue="#{personal}" converter="personalConverter" forceSelection="true">
                                    <p:column style="width:10%">
                                         <h:outputText value="#{personal.dni}" />
                                     </p:column>
                                     <p:column style="width:90%">
                                         <h:outputText value="#{personal.razonsocial}" />
                                     </p:column>
                                </p:autoComplete>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="width:20%;" headerText="Vehículo" filterBy="#{listDet_tareoweb.idvehiculo}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.idvehiculo}">
                        <p:cellEditor >
                            <f:facet name="output">
                                <h:outputText value="#{listDet_tareoweb.idvehiculo} - #{listDet_tareoweb.vehiculo}"/>
                            </f:facet>
                            <f:facet name="input" >
                                <p:autoComplete size="80" id="vehiculo" value="#{tareowebAction.selectConsumidor}" maxResults="10" completeMethod="#{tareowebAction.completeConsumidor}"
                                            var="vehiculo" itemLabel="#{vehiculo.idconsumidor}" itemValue="#{vehiculo}" converter="consumidorConverter" forceSelection="true">
                                    <p:column style="width:10%">
                                         <h:outputText value="#{vehiculo.idconsumidor}" />
                                     </p:column>
                                     <p:column style="width:90%">
                                         <h:outputText value="#{vehiculo.descripcion}" />
                                     </p:column>
                                </p:autoComplete>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column style="width:5%;" headerText="Checklist" filterBy="#{listDet_tareoweb.checklist}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.checklist}">
                        <p:cellEditor>
                           <f:facet name="output">
                               <h:outputText value="#{listDet_tareoweb.checklist}">
                               </h:outputText>
                           </f:facet>
                            <f:facet name="input">
                                <p:inputText id="checklist" value="#{listDet_tareoweb.checklist}">
                                    <p:ajax event="blur" update="listDet_tareoweb:checklist"/>
                                </p:inputText>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column id="hora_req" style="width:5%;" headerText="Hora Req." filterBy="#{listDet_tareoweb.fhora_req}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.fhora_req}">
                        <f:facet name="header">
                            <h:outputText value="Hora Req."/>
                        </f:facet>
                        <h:outputText value="#{listDet_tareoweb.fhora_req}">
                            <f:convertDateTime type="both" pattern="HH:mm" timeZone="America/Lima" />
                        </h:outputText>
                    </p:column>
                    <p:column style="width:5%;" headerText="Hora Llegada" filterBy="#{listDet_tareoweb.shora_llegada}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.shora_llegada}">
                        <p:cellEditor >
                           <f:facet name="output">
                               <h:outputText value="#{listDet_tareoweb.shora_llegada}">
                               </h:outputText>
                           </f:facet>
                            <f:facet name="input" >
                               <p:inputMask id="hora_llegada" mask="99:99" value="#{listDet_tareoweb.shora_llegada}">
                               </p:inputMask>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column style="width:5%;" headerText="Hora Inicio" filterBy="#{listDet_tareoweb.shora_inicio}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.shora_inicio}">
                        <p:cellEditor >
                           <f:facet name="output">
                               <h:outputText value="#{listDet_tareoweb.shora_inicio}">
                               </h:outputText>
                           </f:facet>
                            <f:facet name="input" >
                               <p:inputMask id="hora_inicio" mask="99:99" value="#{listDet_tareoweb.shora_inicio}">
                               </p:inputMask>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column style="width:5%;" headerText="Hora Fin" filterBy="#{listDet_tareoweb.shora_fin}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.shora_fin}">
                        <p:cellEditor >
                           <f:facet name="output">
                               <h:outputText value="#{listDet_tareoweb.shora_fin}">
                               </h:outputText>
                           </f:facet>
                           <f:facet name="input" >
                               <p:inputMask  id="hora_fin" mask="99:99" value="#{listDet_tareoweb.shora_fin}">
                               </p:inputMask>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column style="width:5%;" headerText="Hora Liberación" filterBy="#{listDet_tareoweb.shora_liberacion}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.shora_liberacion}">
                        <p:cellEditor >
                           <f:facet name="output">
                               <h:outputText value="#{listDet_tareoweb.shora_liberacion}">
                               </h:outputText>
                           </f:facet>
                           <f:facet name="input" >
                               <p:inputMask  id="hora_liberacion" mask="99:99" value="#{listDet_tareoweb.shora_liberacion}">
                               </p:inputMask>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column id="fechafinregistro" style="width:5%;" headerText="Fecha Fin" filterBy="#{listDet_tareoweb.fechafinregistro}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.fechafinregistro}">
                        <p:cellEditor >
                           <f:facet name="output">
                                <h:outputText value="#{listDet_tareoweb.fechafinregistro}">
                                   <f:convertDateTime type="date" pattern="dd/MM/yyyy" />
                                </h:outputText>
                           </f:facet>
                           <f:facet name="input">
                               <p:calendar value="#{listDet_tareoweb.fechafinregistro}" pattern="dd-MM-yyyy" mask="true" />
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column style="width:10%;background-color:##{listDet_tareoweb.color}" headerText="T.Asistencia" filterBy="(#{listDet_tareoweb.codasistencia})#{listDet_tareoweb.asistencia}" filterMatchMode="contains" sortBy="(#{listDet_tareoweb.codasistencia})#{listDet_tareoweb.asistencia}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="(#{listDet_tareoweb.codasistencia})#{listDet_tareoweb.asistencia}" /></f:facet>
                           <f:facet name="input">
                               <h:selectOneMenu value="#{listDet_tareoweb.codasistencia}" style="width:100%">
                                   <f:selectItems value="#{tareowebAction.listTipo_asistencia}" var="ta" itemLabel="#{ta.nombre_corto}" itemValue="#{ta.idtipoasistencia}" />
                               </h:selectOneMenu>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column headerText="AT" selectionMode="single" style="width:10px;text-align:center">
                        
                    </p:column>
                    <!-- FOR REPORT -->
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Placa Police"/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.idvehiculo}"/>
                    </p:column>
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Conductor"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.conductor_rpt}"/>
                    </p:column>
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Precinto"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.precinto_rpt}"/>
                    </p:column>
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Placa Vehiculo"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.placa_cliente_rpt}"/>
                    </p:column>
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Glosa"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.glosa}"/>
                    </p:column>
               </p:dataTable>
            <p:dialog id="dlgasignar_personal" header="..::Asignar - Personal::." widgetVar="dlgasignar_personal" modal="true" showEffect="popup" closable="false">
                <p:panelGrid columns="1" columnClasses="no-border">
                    <p:panelGrid columns="7" columnClasses="no-border, no-border, no-border, no-border, no-border, no-border, no-border">
                        <p:outputLabel value="Documento: " />
                        <p:inputText id="iddocumento" size="3" maxlength="3"
                             value="#{tareowebAction.iddocumento_local}" 
                             onkeyup="javascript:this.value = this.value.toUpperCase();">
                            <p:ajax event="valueChange" immediate="true" process="@this"/>
                        </p:inputText>
                        <p:outputLabel value="Serie: " />
                        <p:inputText id="serie" maxlength="4" size="4" 
                                 value="#{tareowebAction.serie_local}" 
                                 onblur="javascript:this.value = ('0000' + this.value).slice( - 4);" 
                                 onkeypress="if (event.which lt; 48 || event.which gt; 57) return false;">
                            <p:ajax event="valueChange" immediate="true" process="@this"/>
                        </p:inputText>
                        <p:outputLabel value="Número: " />
                        <p:inputText id="numero" maxlength="7" size="7"
                            value="#{tareowebAction.numero_local}" 
                            onblur="javascript:this.value = ('0000000' + this.value).slice( - 7);" 
                            onkeypress="if (event.which  lt; 48 || event.which  gt; 57) return false;">
                           <p:ajax event="valueChange" immediate="true" process="@this"/>
                        </p:inputText>
                        <p:commandButton id="btn_cargar_personal" ajax="true" value="Cargar Personal" actionListener="#{tareowebAction.onCargaPersonalServicio()}" 
                                    update="listPersonal_servicio"/>
                    </p:panelGrid>
                    <p:panelGrid columns="2" columnClasses="no-border, no-border">
                        <p:outputLabel value="Personal:" escape="false" />
                        <h:panelGrid id="cntCliePersonal" cellpadding="0" cellspacing="0" columns="3">
                            <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{tareowebAction.verCntClieprovPersonal}" 
                                             icon="ui-icon-search">
                                <p:ajax event="dialogReturn" listener="#{tareowebAction.valorClieprovPersonal}" update="cntCliePersonal"/>
                            </p:commandButton>
                            <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareowebAction.selectClieprovPersonal.dni}"/>
                            <p:inputText size="50" readonly="true" value="#{tareowebAction.selectClieprovPersonal.razonsocial}" />
                        </h:panelGrid>
                    </p:panelGrid>
                    <p:dataTable id="listPersonal_servicio" var="listPersonal_servicio" value="#{tareowebAction.listPersonal_servicio}" widgetVar="listPersonal_servicio"
                        paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                        paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{tareowebAction.selectPersonal_servicio}" rowKey="#{listPersonal_servicio.item2}">
                           <p:ajax event="rowSelect" listener="#{tareowebAction.onRowSelectPersonal_Servicio}" />
                           <f:facet name="{Comandos}">
                               <p:commandButton value="Asignar" ajax="true" image="ui-icon-nuevo" actionListener="#{tareowebAction.asignacionPersonal_servicio()}" disabled="#{tareowebAction.btn_asignar_personal}"/>
                           </f:facet>
                           <p:column style="width:10%;" filterBy="#{listPersonal_servicio.item2}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.item2}">
                               <f:facet name="header">
                                   <h:outputText value="N°"/>
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.item2}"/>
                           </p:column>
                           <p:column style="width:20%;" filterBy="#{listPersonal_servicio.cargo}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.cargo}">
                               <f:facet name="header" >
                                   <h:outputText value="Cargo" />
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.cargo}" />
                           </p:column>
                           <p:column style="width:20%;" filterBy="#{listPersonal_servicio.dni}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.dni}">
                               <f:facet name="header" >
                                   <h:outputText value="Dni" />
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.dni}" />
                           </p:column>
                           <p:column style="width:30%;" filterBy="#{listPersonal_servicio.nombres}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.nombres}">
                               <f:facet name="header" >
                                   <h:outputText value="Nombre" />
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.nombres}" />
                           </p:column>
                       </p:dataTable>
                    <br/>
                    <p:toolbar>
                        <f:facet name="right">
                            <p:commandButton value="Grabar" ajax="true" actionListener="#{tareowebAction.grabarAsignacionPersonal_servicio}" image="ui-icon-grabar"/>
                            <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgasignar_personal').hide()" />
                        </f:facet>
                    </p:toolbar>  
                </p:panelGrid>                      
            </p:dialog>
            <p:dialog id="dlgAddItemTareo" header="..:: Agregar - Item - Tareo ::." widgetVar="dlgAddItemTareo" modal="true" showEffect="popup" closable="false">
                <p:panelGrid columns="1" columnClasses="no-border">
                    <p:panelGrid columns="2" columnClasses="no-border, no-border">
                        <p:outputLabel value="Documento: " />
                        <p:selectOneMenu value="#{tareowebAction.selectComboEspecial_idordenservicio}" style="width:100%">
                            <f:selectItems value="#{tareowebAction.listComboEspecial}" var="lst" itemLabel="#{lst.documento_razon}" itemValue="#{lst.idordenservicio}" />
                        </p:selectOneMenu>
                        <p:outputLabel value="#Cantidad:"/>
                        <p:spinner value="#{tareowebAction.num_repetir}" min="1" />
                        <p:outputLabel value="Cargo:" />
                        <h:panelGrid id="cntCargos_personal" cellpadding="0" cellspacing="0" columns="3">
                            <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{tareowebAction.verCntCargos_personal()}" 
                                             icon="ui-icon-search">
                                <p:ajax event="dialogReturn" listener="#{tareowebAction.valorCargos_personal}" update="cntCargos_personal"/>
                            </p:commandButton>
                            <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareowebAction.selectCargo_personal.idcargo}"/>
                            <p:inputText size="50" readonly="true" value="#{tareowebAction.selectCargo_personal.descripcion}" />
                        </h:panelGrid>
                    </p:panelGrid>
                    <br/>
                    <p:toolbar>
                        <f:facet name="right">
                            <p:commandButton value="Grabar" ajax="true" actionListener="#{tareowebAction.AddItemTareo()}" image="ui-icon-grabar"/>
                            <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgAddItemTareo').hide()" />
                        </f:facet>
                    </p:toolbar>  
                </p:panelGrid>                      
            </p:dialog>
            <p:dialog id="dlgDetalleAsistencia" header="..:: Asistencia de Servicio ::." widgetVar="dlgDetalleAsistencia" modal="true" showEffect="popup" closable="false">
                <p:panelGrid columns="1" columnClasses="no-border">
                    <p:panelGrid columns="2" columnClasses="no-border, no-border">
                        <p:outputLabel value="Personal: " />
                        <p:outputLabel value="#{tareowebAction.selectDet_tareoweb.dni} - #{tareowebAction.selectDet_tareoweb.personal}" />
                        <p:outputLabel value="Cargo: " />
                        <p:outputLabel value="#{tareowebAction.selectDet_tareoweb.idcargo} - #{tareowebAction.selectDet_tareoweb.cargo}" />
                        <p:outputLabel value="Glosa: " />
                        <p:inputTextarea id="tglosa" value="#{tareowebAction.glosa_local}" cols="35" rows="2" disabled="#{!tareowebAction.selectDet_tareoweb.exige_glosa}"/> 
                    </p:panelGrid>
                    <br/>
                    <p:toolbar>
                        <f:facet name="right">
                            <p:commandButton value="Grabar" ajax="true" actionListener="#{tareowebAction.AddGlosaDet_tareoweb}" image="ui-icon-grabar"/>
                            <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgDetalleAsistencia').hide()" />
                        </f:facet>
                    </p:toolbar>  
                </p:panelGrid>                      
            </p:dialog>
            <p:growl id="growl" life="4000" showDetail="false" />
            <cmp:mDialogElimina_lst id="cmpDialog" bean="#{tareowebAction}" ventana="MNT" />
        </h:form>
    </ui:define>    
</ui:composition>
