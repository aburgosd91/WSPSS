<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="templatebanco.xhtml"
                xmlns:cmp="http://xmlns.jcp.org/jsf/composite/cmp">
    <ui:define name="metadata">
    </ui:define>
    <ui:define name="body">
        <h:form id="datos">
            #{tareoweb_provincialAction.getFillTareoweb()}
            <cmp:barra_mnt bean="#{tareoweb_provincialAction}"/>
            <p:panelGrid columns="1" style="width:98%; text-align: left" columnClasses="no-border">
                <f:facet name="header">
                    <p:outputLabel value="#{tareoweb_provincialAction.tituloHead}"/>
                </f:facet>
                <div class="ui-grid">
                    <div class="ui-grid-row">
                        <p:fieldset legend="Datos" style="width: 100%" toggleable="true" toggleSpeed="500">
                            <p:panelGrid  columns="8" columnClasses="no-border,no-border,no-border,no-border,no-border,no-border,no-border,no-border" style="width: 100%">
                                <p:outputLabel value="Punto Emisión"/>
                                <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.datoEdicion.idemisor}" disabled="true"/>
                                <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.datoEdicion.emisor}" disabled="true"/>

                                <p:outputLabel value="Periódo"/>
                                <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.periodoDisenio}" disabled="true"/>
                                <p:inputText size="10" readonly="true" value="#{tareoweb_provincialAction.mesNombreDisenio}" disabled="true"/>
                            </p:panelGrid>
                            <div class="ui-grid-col-6">
                                <p:panelGrid  columns="2" columnClasses="no-border, no-border" style="width: 100%">
                                    <p:outputLabel value="Documentos"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border,no-border" style="margin-left: -10px;">
                                        <p:selectOneMenu id="cboiddoc" value="#{tareoweb_provincialAction.datoEdicion.iddocumento}" style="width:200px" disabled="#{!tareoweb_provincialAction.edicion}">
                                            <p:ajax listener="#{tareoweb_provincialAction.oncDocChange}" update="cboserie num" />
                                            <f:selectItems value="#{tareoweb_provincialAction.listDocumentos}" var="iddocs" itemLabel="#{iddocs.descripcion}" itemValue="#{iddocs.iddocumento}"/>
                                        </p:selectOneMenu>
                                        <p:selectOneMenu id="cboserie" value="#{tareoweb_provincialAction.datoEdicion.serie}" style="width:70px" disabled="#{!tareoweb_provincialAction.edicion}">
                                            <f:selectItems value="#{tareoweb_provincialAction.listNumemisor}" var="nume" itemLabel="#{nume.serie}" itemValue="#{nume.serie}"/>
                                        </p:selectOneMenu>
                                        <p:inputText id="num" style="width: 90px !important" value="#{tareoweb_provincialAction.datoEdicion.numero}" disabled="#{!tareoweb_provincialAction.edicion}"  readonly="true"/>
                                    </p:panelGrid>
                                    <p:outputLabel value="Sucursal"/>
                                    <p:panelGrid  columns="2" columnClasses="no-border, no-border" >
                                        <p:inputText  style="text-align: left;margin-left: 0px;" size="15" readonly="true"  value="#{tareoweb_provincialAction.datoEdicion.idsucursal}" disabled="#{!tareoweb_provincialAction.edicion}"/>
                                        <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.datoEdicion.sucursal}" disabled="#{!tareoweb_provincialAction.edicion}"/>
                                    </p:panelGrid>
                                    <p:outputLabel value="Cliente:" escape="false" />
                                    <h:panelGrid id="cntClie" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton id="btnbuscarcliente" styleClass="boton_buscar" ajax="true" actionListener="#{tareoweb_provincialAction.verCntClieprov}" 
                                                         icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{tareoweb_provincialAction.valorClieprov}" update="cntClie"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.selectClieprov.idclieprov}" disabled="#{!tareoweb_provincialAction.edicion}"/>
                                        <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.selectClieprov.razonsocial}" disabled="#{!tareoweb_provincialAction.edicion}"/>
                                    </h:panelGrid>
                                    <p:outputLabel value="Responsable:" escape="false" />
                                    <h:panelGrid id="cntCliePersonalS" cellpadding="0" cellspacing="0" columns="3">
                                        <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{tareoweb_provincialAction.verCntClieprovPersonalSupervisorOperador}" 
                                                         disabled="#{!tareoweb_provincialAction.edicion}"  icon="ui-icon-search">
                                            <p:ajax event="dialogReturn" listener="#{tareoweb_provincialAction.valorClieprovPersonalS}" update="cntCliePersonalS"/>
                                        </p:commandButton>
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.datoEdicion.idresponsable}"/>
                                        <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.datoEdicion.responsable}" />
                                    </h:panelGrid>
                                    
                                </p:panelGrid>
                            </div>
                            <div class="ui-grid-col-6">
                                <p:panelGrid  columns="2" columnClasses="no-border, no-border" >
                                    <p:outputLabel value="Fecha" escape="false"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border, no-border" >
                                        <p:calendar id="button1" value="#{tareoweb_provincialAction.datoEdicion.fecha}" showOn="button" pattern="dd/MM/yyyy" mask="true" disabled="#{!tareoweb_provincialAction.edicion}">
                                            <!--<p:ajax event="dateSelect" listener="{planventaAction.updateCampañas}" update="lstCampaña"/>-->
                                        </p:calendar>
                                        <p:outputLabel for="estado"  value="Estado:" />
                                        <p:selectOneMenu id="estado" value="#{tareoweb_provincialAction.datoEdicion.idestado}"  disabled="true" style="font-weight: bold">    
                                            <f:selectItems value="#{tareoweb_provincialAction.listEstado}" var="tipoEstado" itemLabel="#{tipoEstado.descripcion}" itemValue="#{tipoEstado.idestado}" />
                                        </p:selectOneMenu>
                                    </p:panelGrid>                                    
                                    <p:outputLabel value="Almacen" escape="false"/>
                                    <p:selectOneMenu id="idalmacen" value="#{tareoweb_provincialAction.datoEdicion.idalmacen}" style="width:380px" disabled="#{!tareoweb_provincialAction.edicion}">
                                        <f:selectItems value="#{tareoweb_provincialAction.listAlmacenes}" var="almacen" itemLabel="#{almacen.descripcion}" itemValue="#{almacen.idalmacen}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Turno" escape="false"/>
                                    <p:panelGrid  columns="3" columnClasses="no-border, no-border,no-border" style="margin-left: -10px;">
                                        <p:selectOneMenu id="idturno" value="#{tareoweb_provincialAction.datoEdicion.idturnotrabajo}" style="width:150px" disabled="#{!tareoweb_provincialAction.edicion}">
                                            <f:selectItems value="#{tareoweb_provincialAction.listTurno_trabajo}" var="turno" itemLabel="#{turno.descripcion}" itemValue="#{turno.idturnotrabajo}"/>
                                        </p:selectOneMenu>
                                        <p:outputLabel for="tiposervicio"  value="Tipo Asistencia:" />
                                        <p:selectOneMenu id="tiposervicio" value="#{tareoweb_provincialAction.datoEdicion.idtipoasistencia}"  disabled="#{!tareoweb_provincialAction.edicion}">
                                            <p:ajax listener="#{tareoweb_provincialAction.onTiposervicio()}"/>
                                            <f:selectItem itemLabel="Asistencia Normal" itemValue="ASN"/>
                                            <f:selectItem itemLabel="Asistencia Regularización " itemValue="ASR"/>
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                    <p:outputLabel value="Creado Por:" escape="false" />
                                    <h:panelGrid cellpadding="0" cellspacing="0" columns="2">
                                        <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.datoEdicion.idusuario}"/>
                                        <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.datoEdicion.usuario}"/>
                                    </h:panelGrid>
                                </p:panelGrid>
                            </div> 
                        </p:fieldset> 
                    </div>
                </div>
            </p:panelGrid>
            <p:toolbar id="tb" style="font-size: 11px;">
                <f:facet name="left">
                    <h:panelGrid  id="comandos" cellpadding="0" cellspacing="0"  columns="5">
                       <p:commandButton value="Asignar Personal" ajax="true" image="ui-icon-reload" actionListener="#{tareoweb_provincialAction.openDialogAsignacionPersonal()}"  rendered="false"  />
                       <p:commandButton value="Agregar Item" ajax="true" image="ui-icon-nuevo" actionListener="#{tareoweb_provincialAction.openDialogAddItemTareo()}"  disabled="#{!tareoweb_provincialAction.edicion}"/>
                       <p:commandButton value="Refrescar" ajax="true" image="ui-icon-reload" actionListener="#{tareoweb_provincialAction.onRefresh()}"  disabled="#{!tareoweb_provincialAction.edicion}"/>
                       <p:commandButton value="Exportar" ajax="false" image="ui-icon-excel">
                           <p:dataExporter type="xls" target="datos:listDet_tareoweb" fileName="Tareo_Fijo_#{tareoweb_provincialAction.datoEdicion.iddocumento}-#{tareoweb_provincialAction.datoEdicion.serie}-#{tareoweb_provincialAction.datoEdicion.numero}"
                                postProcessor="#{tareoweb_provincialAction.postProcessXLS}"/>
                        </p:commandButton>
                    </h:panelGrid>
                </f:facet>
            </p:toolbar>
            <p:sticky target="tb" />
            <p:dataTable id="listDet_tareoweb" var="listDet_tareoweb" 
                         value="#{tareoweb_provincialAction.listDet_tareoweb}" 
                         widgetVar="listDet_tareoweb" scrollable="true" scrollWidth="510px;"
                style="margin-bottom:20px;font-size: 12px;" 
                selection="#{tareoweb_provincialAction.selectDet_tareoweb}" selectionMode="single" 
                frozenColumns="8" 
                rowKey="#{listDet_tareoweb.item}" editable="#{tareoweb_provincialAction.edicion}" editMode="cell"
                rowIndexVar="rownum" >
                    <p:ajax event="cellEdit" listener="#{tareoweb_provincialAction.onCellEdit}" update="listDet_tareoweb"/>
                    <p:ajax event="rowSelectRadio" listener="#{tareoweb_provincialAction.openDialogAsistencia()}"/>
                    <f:facet name="header">
                        ..:: Detalle Tareo ::..                 (Total:#{tareoweb_provincialAction.listDet_tareoweb.size()})
                    </f:facet>
                    <p:column headerText="N°" sortBy="#{listDet_tareoweb.item}" style="white-space: nowrap; width: 10px;padding: 3px;text-align: center">
                        <h:outputText value="#{listDet_tareoweb.item}"/>
                     </p:column>
                    <p:column headerText="Doc." filterBy="#{listDet_tareoweb.iddocumento}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.iddocumento}"  style="white-space: nowrap; width: 30px;padding: 3px;text-align: center">
                       <h:outputText value="#{listDet_tareoweb.iddocumento}"/>
                    </p:column>
                    <p:column headerText="Serie" filterBy="#{listDet_tareoweb.serie}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.serie}" style="white-space: nowrap; width: 38px;padding: 3px;text-align: center">
                       <h:outputText value="#{listDet_tareoweb.serie}"/>
                    </p:column>
                    <p:column headerText="Número" filterBy="#{listDet_tareoweb.numero}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.numero}" style="white-space: nowrap; width: 48px;padding: 3px;text-align: center">
                       <h:outputText value="#{listDet_tareoweb.numero}"/>
                    </p:column>
                    <p:column style="white-space: nowrap; width: 48px;padding: 3px;" filterBy="#{tareoweb_provincialAction.fechaDMY(listDet_tareoweb.fecha_osc)}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.fecha_osc}">
                        <f:facet name="header">
                            <h:outputText value="Fecha" />
                        </f:facet>
                        <h:outputText value="#{listDet_tareoweb.fecha_osc}">
                            <f:convertDateTime type="date" pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Cliente" filterBy="#{listDet_tareoweb.ruc} - #{listDet_tareoweb.razon}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.ruc} - #{listDet_tareoweb.razon}" style="white-space: nowrap; width: 180px;padding: 3px;text-align: left">
                       <h:outputText value="#{listDet_tareoweb.ruc} - #{listDet_tareoweb.razon}"/>
                    </p:column>
                    <p:column headerText="Cargo" filterBy="#{listDet_tareoweb.cargo}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.cargo}" style="white-space: nowrap; width: 130px;padding: 3px;text-align: left">
                       <h:outputText value="#{listDet_tareoweb.cargo}"/>
                    </p:column>
                    <p:column headerText="Personal" filterBy="#{listDet_tareoweb.dni} - #{listDet_tareoweb.personal}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.personal}" style="white-space: nowrap; width: 220px;padding: 3px;text-align: left">
                        <p:cellEditor >
                            <f:facet name="output">
                                <h:outputText value="#{listDet_tareoweb.dni} - #{listDet_tareoweb.personal}"/>
                            </f:facet>
                            <f:facet name="input" >
                                <p:autoComplete size="80" id="personal" value="#{listDet_tareoweb.selectPersonal}" maxResults="10" completeMethod="#{tareoweb_provincialAction.completePersonal}"
                                            var="personal" itemLabel="#{personal.dni}" itemValue="#{personal}" converter="personalConverter" forceSelection="true">
                                    <p:column style="width:10%">
                                         <h:outputText value="#{personal.dni}" />
                                     </p:column>
                                     <p:column style="width:90%">
                                         <h:outputText value="#{personal.razonsocial}" />
                                     </p:column>
                                </p:autoComplete>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    
                    <p:column headerText="Checklist" filterBy="#{listDet_tareoweb.checklist}" 
                              style="white-space: nowrap; width: 80px;padding: 3px;text-align: center" 
                              filterMatchMode="contains" sortBy="#{listDet_tareoweb.checklist}">
                        <p:cellEditor>
                           <f:facet name="output">
                               <h:outputText value="#{listDet_tareoweb.checklist}">
                               </h:outputText>
                           </f:facet>
                            <f:facet name="input">
                                <p:inputText id="checklist" value="#{listDet_tareoweb.checklist}">
                                    <p:ajax event="blur" update="listDet_tareoweb:checklist"/>
                                </p:inputText>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    
                    <!-- AUTOGENERADO -->                    
                    <p:columns headerText="#{columna.descripcion}" value="#{tareoweb_provincialAction.listDestructura_tareo_clieprov}" 
                               style="white-space: nowrap; width: 150px;padding: 3px;text-align: center" 
                               var="columna"  resizable="true" columnIndexVar="ivar">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{listDet_tareoweb.tareo[ivar][1]}">
                               </h:outputText>
                           </f:facet>
                            <f:facet name="input" >
                                <p:inputMask mask="#{listDet_tareoweb.tareo[ivar][3]?'99:99':'99/99/9999'}" value="#{listDet_tareoweb.tareo[ivar][1]}">
                                </p:inputMask>
                           </f:facet>
                        </p:cellEditor>
                    </p:columns>
                    <!-- CHECK -->
                    <p:column style="white-space: nowrap; width: 130px;padding: 3px;text-align: center;background-color:##{listDet_tareoweb.color}" 
                              headerText="T.Asistencia" filterBy="#{listDet_tareoweb.asistencia}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.asistencia}">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{listDet_tareoweb.asistencia}" /></f:facet>
                           <f:facet name="input">
                               <h:selectOneMenu value="#{listDet_tareoweb.codasistencia}" style="width:100%">
                                   <f:selectItems value="#{tareoweb_provincialAction.listTipo_asistencia}" var="ta" itemLabel="#{ta.nombre_corto}-#{ta.descripcion}" itemValue="#{ta.idtipoasistencia}" />
                               </h:selectOneMenu>
                           </f:facet>
                       </p:cellEditor>
                    </p:column>
                    <p:column headerText="Glosa" filterBy="#{listDet_tareoweb.glosa}" filterMatchMode="contains" sortBy="#{listDet_tareoweb.glosa}"  style="white-space: nowrap; width: 200px;padding: 3px;text-align: center">
                       <h:outputText value="#{listDet_tareoweb.glosa}"/>
                    </p:column>
                    
                    <!-- FOR REPORT -->
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Placa Police"/>
                       </f:facet>
                       <h:outputText value="#{listDet_tareoweb.idvehiculo}"/>
                    </p:column>
                    
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Conductor"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.conductor_rpt}"/>
                    </p:column>
                    
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Precinto"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.precinto_rpt}"/>
                    </p:column>
                    
                    <p:column visible="false">
                       <f:facet name="header">
                           <h:outputText value="Placa Vehiculo"/>
                       </f:facet>
                        <h:outputText value="#{listDet_tareoweb.placa_cliente_rpt}"/>
                    </p:column>
                    
               </p:dataTable>
            <p:contextMenu for="listDet_tareoweb">
                <p:menuitem value="Reg. Incidencia" icon="ui-icon-search" actionListener="#{tareoweb_provincialAction.openDialogAsistencia()}" />
                <p:menuitem value="Mostrar" update="detalleDialog" icon="ui-icon-search" oncomplete="PF('detalleDialog').show()"/>
                <p:menuitem value="Eliminar" update="listDet_tareoweb" icon="ui-icon-close" actionListener="#{tareoweb_provincialAction.deleteDettareo_web()}">
                    <p:confirm header="Advertencia" message="Está seguro de eliminar registro?" icon="ui-icon-alert" />
                </p:menuitem>
            </p:contextMenu>
            <p:dialog id="_id_dlgasignar_personal" header="..::Asignar - Personal::." widgetVar="dlgasignar_personal" modal="true" showEffect="popup" closable="false">
                <p:panelGrid columns="1" columnClasses="no-border">
                    <p:panelGrid columns="7" columnClasses="no-border, no-border, no-border, no-border, no-border, no-border, no-border">
                        <p:outputLabel value="Documento: " />
                        <p:inputText id="iddocumento" size="3" maxlength="3"
                             value="#{tareoweb_provincialAction.iddocumento_local}" 
                             onkeyup="javascript:this.value = this.value.toUpperCase();">
                            <p:ajax event="valueChange" immediate="true" process="@this"/>
                        </p:inputText>
                        <p:outputLabel value="Serie: " />
                        <p:inputText id="serie" maxlength="4" size="4" 
                                 value="#{tareoweb_provincialAction.serie_local}" 
                                 onblur="javascript:this.value = ('0000' + this.value).slice( - 4);" 
                                 onkeypress="if (event.which lt; 48 || event.which gt; 57) return false;">
                            <p:ajax event="valueChange" immediate="true" process="@this"/>
                        </p:inputText>
                        <p:outputLabel value="Número: " />
                        <p:inputText id="numero" maxlength="7" size="7"
                            value="#{tareoweb_provincialAction.numero_local}" 
                            onblur="javascript:this.value = ('0000000' + this.value).slice( - 7);" 
                            onkeypress="if (event.which  lt; 48 || event.which  gt; 57) return false;">
                           <p:ajax event="valueChange" immediate="true" process="@this"/>
                        </p:inputText>
                        <p:commandButton id="btn_cargar_personal" ajax="true" value="Cargar Personal" actionListener="#{tareoweb_provincialAction.onCargaPersonalServicio()}" 
                                    update="listPersonal_servicio"/>
                    </p:panelGrid>
                    <p:panelGrid columns="2" columnClasses="no-border, no-border">
                        <p:outputLabel value="Personal:" escape="false" />
                        <h:panelGrid id="cntCliePersonal" cellpadding="0" cellspacing="0" columns="3">
                            <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{tareoweb_provincialAction.verCntClieprovPersonal}" 
                                             icon="ui-icon-search">
                                <p:ajax event="dialogReturn" listener="#{tareoweb_provincialAction.valorClieprovPersonal}" update="cntCliePersonal"/>
                            </p:commandButton>
                            <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.selectClieprovPersonal.dni}"/>
                            <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.selectClieprovPersonal.razonsocial}" />
                        </h:panelGrid>
                    </p:panelGrid>
                    <p:dataTable id="listPersonal_servicio" var="listPersonal_servicio" value="#{tareoweb_provincialAction.listPersonal_servicio}" widgetVar="listPersonal_servicio"
                        paginatorTemplate="{Comandos} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                        paginator="true" paginatorPosition="top" rows="15" style="margin-bottom:20px" selectionMode="single" selection="#{tareoweb_provincialAction.selectPersonal_servicio}" rowKey="#{listPersonal_servicio.item2}">
                           <p:ajax event="rowSelect" listener="#{tareoweb_provincialAction.onRowSelectPersonal_Servicio}" />
                           <f:facet name="{Comandos}">
                               <p:commandButton value="Asignar" ajax="true" image="ui-icon-nuevo" actionListener="#{tareoweb_provincialAction.asignacionPersonal_servicio()}" disabled="#{tareoweb_provincialAction.btn_asignar_personal}"/>
                           </f:facet>
                           <p:column style="width:10%;" filterBy="#{listPersonal_servicio.item2}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.item2}">
                               <f:facet name="header">
                                   <h:outputText value="N°"/>
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.item2}"/>
                           </p:column>
                           <p:column style="width:20%;" filterBy="#{listPersonal_servicio.cargo}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.cargo}">
                               <f:facet name="header" >
                                   <h:outputText value="Cargo" />
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.cargo}" />
                           </p:column>
                           <p:column style="width:20%;" filterBy="#{listPersonal_servicio.dni}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.dni}">
                               <f:facet name="header" >
                                   <h:outputText value="Dni" />
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.dni}" />
                           </p:column>
                           <p:column style="width:30%;" filterBy="#{listPersonal_servicio.nombres}" filterMatchMode="contains" sortBy="#{listPersonal_servicio.nombres}">
                               <f:facet name="header" >
                                   <h:outputText value="Nombre" />
                               </f:facet>
                               <h:outputText value="#{listPersonal_servicio.nombres}" />
                           </p:column>
                       </p:dataTable>
                    <br/>
                    <p:toolbar>
                        <f:facet name="right">
                            <p:commandButton value="Grabar" ajax="true" actionListener="#{tareoweb_provincialAction.grabarAsignacionPersonal_servicio}" image="ui-icon-grabar"/>
                            <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgasignar_personal').hide()" />
                        </f:facet>
                    </p:toolbar>  
                </p:panelGrid>                      
            </p:dialog>
            <p:dialog id="dlgAddItemTareo" header="..:: Agregar - Item - Tareo ::." widgetVar="dlgAddItemTareo" modal="true" showEffect="popup" closable="false">
                <p:panelGrid columns="1" columnClasses="no-border">
                    <p:panelGrid columns="2" columnClasses="no-border, no-border">
                        <p:outputLabel value="Documento: " />
                        <p:selectOneMenu id="idordenservicio_add" value="#{tareoweb_provincialAction.selectComboEspecial_idordenservicio}" style="width:100%">
                            <p:ajax listener="#{tareoweb_provincialAction.cargarComboEspecialDetalle()}"/>
                            <f:selectItems value="#{tareoweb_provincialAction.listComboEspecial}" var="lst" itemLabel="#{lst.descripcion}" itemValue="#{lst.id}" />
                        </p:selectOneMenu>
                        <p:outputLabel value="Servicio: " />
                        <p:selectOneMenu id="iddordenservicio_add" value="#{tareoweb_provincialAction.selectComboEspecialDetalle_idordenservicio}" style="width:100%">
                            <f:selectItems value="#{tareoweb_provincialAction.listComboEspecialDetalle}" var="lstdet" itemLabel="#{lstdet.descripcion}" itemValue="#{lstdet.id}" />
                        </p:selectOneMenu>
                        <p:outputLabel value="#Cantidad:"/>
                        <p:spinner value="#{tareoweb_provincialAction.num_repetir}" min="1" />
                        <p:outputLabel value="Cargo:" />
                        <h:panelGrid id="cntCargos_personal" cellpadding="0" cellspacing="0" columns="3">
                            <p:commandButton styleClass="boton_buscar" ajax="true" actionListener="#{tareoweb_provincialAction.verCntCargos_personal()}" 
                                             icon="ui-icon-search">
                                <p:ajax event="dialogReturn" listener="#{tareoweb_provincialAction.valorCargos_personal}" update="cntCargos_personal"/>
                            </p:commandButton>
                            <p:inputText  style="text-align: left" size="15" readonly="true"  value="#{tareoweb_provincialAction.selectCargo_personal.idcargo}"/>
                            <p:inputText size="50" readonly="true" value="#{tareoweb_provincialAction.selectCargo_personal.descripcion}" />
                        </h:panelGrid>
                    </p:panelGrid>
                    <br/>
                    <p:toolbar>
                        <f:facet name="right">
                            <p:commandButton value="Grabar" ajax="true" actionListener="#{tareoweb_provincialAction.AddItemTareo()}" image="ui-icon-grabar"/>
                            <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgAddItemTareo').hide()" />
                        </f:facet>
                    </p:toolbar>  
                </p:panelGrid>                      
            </p:dialog>
            
            <p:dialog id="id_dlgDetalleAsistencia" header="..:: Asistencia de Servicio ::." widgetVar="dlgDetalleAsistencia" modal="true" showEffect="popup" closable="false">
                <p:panelGrid columns="1" columnClasses="no-border">
                    <p:panelGrid columns="2" columnClasses="no-border, no-border">
                        <p:outputLabel value="Personal: " />
                        <p:outputLabel value="#{tareoweb_provincialAction.selectDet_tareoweb.dni} - #{tareoweb_provincialAction.selectDet_tareoweb.personal}" />
                        <p:outputLabel value="Cargo: " />
                        <p:outputLabel value="#{tareoweb_provincialAction.selectDet_tareoweb.idcargo} - #{tareoweb_provincialAction.selectDet_tareoweb.cargo}" />
                        <p:outputLabel value="Glosa: " />
                        <p:inputTextarea id="tglosa" value="#{tareoweb_provincialAction.glosa_local}" cols="35" rows="2"/> 
                    </p:panelGrid>
                    <br/>
                    <p:toolbar>
                        <f:facet name="right">
                            <p:commandButton value="Grabar" ajax="true" actionListener="#{tareoweb_provincialAction.AddGlosaDet_tareoweb}" image="ui-icon-grabar"/>
                            <p:commandButton value="Cancelar" process="@this"  image="ui-icon-cancelar" onclick="PF('dlgDetalleAsistencia').hide()" />
                        </f:facet>
                    </p:toolbar>  
                </p:panelGrid>                      
            </p:dialog>
            <p:dialog id="id_detalleDialog" header="Detalle Datos" widgetVar="detalleDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <p:outputPanel id="detalleDialog" style="text-align:center;">
                    <p:panelGrid  columns="2" rendered="#{not empty tareoweb_provincialAction.selectDet_tareoweb}" columnClasses="label,value">
                        <h:outputText value="Documento:" />
                        <h:outputText value="#{tareoweb_provincialAction.selectDet_tareoweb.iddocumento}-#{tareoweb_provincialAction.selectDet_tareoweb.serie}-#{tareoweb_provincialAction.selectDet_tareoweb.numero}" />
                        <h:outputText value="Cliente" />
                        <h:outputText value="#{tareoweb_provincialAction.selectDet_tareoweb.razon}" />
                        <h:outputText value="Personal:" />
                        <h:outputText value="#{tareoweb_provincialAction.selectDet_tareoweb.personal}" />
                        <h:outputText value="Checklist:" />
                        <h:outputText value="#{tareoweb_provincialAction.selectDet_tareoweb.checklist}" />
                        <h:outputText value="Hora Requerimiento" />
                        <h:outputText value="#{tareoweb_provincialAction.selectDet_tareoweb.shora_req}" />
                        <h:outputText value="Tipo Asistencia" />
                        <h:outputText value="#{tareoweb_provincialAction.selectDet_tareoweb.asistencia}" style="background-color:#{tareoweb_provincialAction.selectDet_tareoweb.color}"/>
                    </p:panelGrid>
                </p:outputPanel>
            </p:dialog>
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
            </p:confirmDialog>
            <p:dialog id="dlg_text" header="..:: Aprobación N° #{tareoweb_provincialAction.datoEdicion.serie} -
                      #{tareoweb_provincialAction.datoEdicion.numero} ::.." 
                      widgetVar="dlg_text" modal="true" showEffect="popup" maximizable="true" closable="true" height="410px" width="600px">
                <textarea style="width:99%;height:95%;" readonly="true">
                    #{tareoweb_provincialAction.log_consola}
                </textarea>    
                <br/>                        
            </p:dialog>
            <p:growl id="growl" life="4000" showDetail="false"  />
            <cmp:mDialogElimina_lst id="cmpDialog" bean="#{tareoweb_provincialAction}" ventana="MNT" />
        </h:form>
    </ui:define>    
</ui:composition>
